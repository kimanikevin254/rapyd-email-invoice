<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Checkout Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
  <body class="container-sm text-center">
    <div class="cont">
        <h1>Checkout page</h1>

        <!-- iframe -->
        <div id="rapyd-checkout"></div>
    </div>

    <!-- code to display the iframe -->
    <script src="https://sandboxcheckouttoolkit.rapyd.net"></script>
    <script>
        window.onload = function () {
            let checkout = new RapydCheckoutToolkit({
                pay_button_text: "Click to pay",
                pay_button_color: "blue",
                id: "<%=checkoutId%>"
            });
            checkout.displayCheckout();
        }
        window.addEventListener('onCheckoutPaymentSuccess', function (event) {
            console.log(event.detail)
            console.log(typeof(event.detail.status))
            alert('payment successful')

            // if(event.detail.status === "CLO"){
                //redirect to checkout page
                window.location.assign('http://localhost:3000/verification')
            // }
        });
        window.addEventListener('onCheckoutPaymentFailure', function (event) {
            console.log(event.detail.error)
            alert('error while processing your payment')
        });
    </script>
  </body>
</html>
